<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bluetooth test</title>

    <!-- The website stylesheet -->
    <link rel="stylesheet" href="/style.css" />

    <!-- The website JavaScript file -->
    <script src="/script.js" defer></script>
  </head>
  <body>
    <div
      style="background: #580064; color: white; font-weight: bold; padding: 5px"
    >
      <span id="socTimer">11:57:29</span>
      <span id="socTime">11:55:19</span>
      <span id="socValue">691</span>
    </div>
    <div class="wrapper">
      <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
        <div style="display: flex; align-items: center; gap: 5px;">
          <span id="bleStatus" style="font-size: 24px;" title="Bluetooth Status">⚫</span>
          <button type="button" id="controlButton">Connect BLE</button>
        </div>
        <div style="display: flex; align-items: center; gap: 5px;">
          <span id="gpsStatus" style="font-size: 24px;" title="GPS Status">⚫</span>
          <button type="button" id="gpsButton">Enable GPS</button>
        </div>
      </div>
      <span id="connectionStatus">IDLE</span>
      <hr />
      <div id="rollingLog" style="background: #f5f5f5; padding: 10px; border-radius: 5px; margin: 10px 0; max-height: 200px; overflow-y: auto; font-size: 12px; font-family: monospace;">
        <strong>Rolling Log (Coordinates & SOC)</strong>
        <div id="rollingLogContent" style="margin-top: 5px;">
          Waiting for data...
        </div>
      </div>
      <div>
        <svg viewbox="0 0 100 1000" width="100%" height="200px" preserveaspectratio="none">
          <path stroke-width="10" stroke="blue" id="spark"></path>
          <path stroke-width="5" stroke="black" id="lr"></path>
        </svg>
      </div>
      <hr />
      <div>
        <button id="soc">Get State Of Charge</button>
        <button id="soh">Get State Of Health</button>
        <button id="votage">Get voltage</button>
        <button id="current">Get current</button>
        <button id="temp">Get battery temp</button>
      </div>
      <input type="text" id="msg" />
      <button id="send">Send message</button>
      <hr />
      <div>
        <h3>Battery Discharge Analysis</h3>
        <div id="dischargeAnalysis" style="font-size: 12px; margin: 10px 0;">
          <p>Collecting GPS and battery data...</p>
        </div>
        <button id="showAnalysis">Show Discharge vs Speed</button>
        <div id="rangeEstimates" style="margin: 10px 0; font-size: 12px;">
          <strong>Range Estimates:</strong>
          <div id="rangeEstimatesList"></div>
        </div>
      </div>
      <hr />
      <div
        id="response"
        style="font-size: 10px; font-family: monospace, monospace;height:200px;overflow-y:auto"
      >
        Response goes here
      </div>
    </div>
  </body>
</html>
